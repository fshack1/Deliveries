<%# locals: (records:, total_cost:, pagy:) -%>

<div class="mdc-data-table">
  <table class="mdc-data-table__table" aria-label="Deliveries table">
    <thead>
      <tr class="mdc-data-table__header-row">
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ID</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Pickup Address</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Delivery Address</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Weight</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Distance</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Scheduled Time</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Cost</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Driver Name</th>
        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Actions</th>
      </tr>
    </thead>

    <tbody class="mdc-data-table__content">
      <%= render(partial: "delivery_row", collection: records, as: :delivery) %>

      <tr class="mdc-data-table__row" id="total_cost">
        <td class="mdc-data-table__cell" colspan="9" style="text-align: right" data-action="click->sideview#openView">          
          <%= link_to(total_cost_deliveries_path, class: "mdc-button mdc-button--outlined", data: { turbo: false, sideview_target: "url" }) do %>
            Total Cost: <%= number_to_currency(total_cost, unit: "â‚¬") %>
          <% end %>
        </td>
      </tr>

    </tbody>
  </table>

  <div class="mdc-pagination">
    <div class="mdc-data-table__pagination">
      <span class="mdc-data-table__pagination-trailing"><%== pagy_nav(pagy) %></span>
    </div>
    <span class="mdc-data-table__pagination-info"><%== pagy_info(pagy) %></span>
  </div>
</div>
